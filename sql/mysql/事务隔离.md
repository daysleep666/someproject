事务隔离级别

读未提交

不提交前其他事务也可以看到更改

读提交

不提交前其他事务看不到更改

可重复读

在select语句之后会产生快照(一致性读),之后的数据只会看到当前事务的修改。

串行

读加读锁，写加写锁

一致性读

在可重复读级别的事务隔离级别下，select语句执行后会产生快照，也就是一致性读，这时候只会看到当前事务的修改。

脏读

在读未提交的隔离级别下，事务A修改了数据，此时，事务B使用了这个被修改的数据，然后事务A回滚了

幻读

事务A查询到了N条语句，事务B插入了符合该条件的M条语句，事务A再查询时查到了N+M条语句

不可重复读

事务A读到了一条语句，事务B修改了该数据，事务A又读了该语句

MVCC

多版本控制

同一份数据有多个版本,每个事务都有一个自己的版本,保证了隔离性

事务中每个操作都会产生undo log,通过undo log可以回退到事务开始之前,保证了原子性,一致性

在事务中,update,insert,delete会产生事务id,select不会

delete时不会直接删除数据，而是在要删除的数据上做标记，在事务commit

update时先在原数据上加删除标记，然后插入一条修改后的数据